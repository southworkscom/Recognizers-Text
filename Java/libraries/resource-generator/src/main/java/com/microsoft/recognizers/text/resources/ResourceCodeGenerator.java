package com.microsoft.recognizers.text.resources;

import org.yaml.snakeyaml.Yaml;

import java.io.*;
import java.nio.file.Path;
import java.util.Map;

public class ResourceCodeGenerator {

    private static final String headerComment = String.join(
            System.lineSeparator(),
            "// ------------------------------------------------------------------------------",
            "// <auto-generated>",
            "//     This code was generated by a tool.",
            "//     Changes to this file may cause incorrect behavior and will be lost if",
            "//     the code is regenerated.",
            "// </auto-generated>",
            "// ------------------------------------------------------------------------------");

    public static void Generate(Path yamlFilePath, Path outputFilePath, String header, String footer) throws FileNotFoundException {

        // Read and Parse YAML
        Yaml yaml = new Yaml();
        Map<String, Object> raw = (Map<String, Object>) yaml.load(new FileReader(yamlFilePath.toString()));

        // Transform
        System.out.println("Count: " + raw.size());

        // Write to file
        BufferedWriter writer = null;
        try {
            File outputFile = outputFilePath.toFile();
            writer = new BufferedWriter(new FileWriter(outputFile));
            writer.write(headerComment);
            writer.write(System.lineSeparator());
            writer.write(System.lineSeparator());
            writer.write(header);
            writer.write(System.lineSeparator());

            //..


            writer.write(footer);
            writer.write(System.lineSeparator());
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                writer.close();
            } catch (Exception e) {
            }
        }
    }
}
